<div class="flex justify-start h-[90vh]">
  <% if post.images.length < 2 %>
    <div class="h-full aspect-square border-r border-zinc-200">
      <% post.images.each do |image| %>
        <%= image_tag image, class: "w-full h-full relative top-0 bottom-0 right-0 left-0 object-contain transition-transform"%>
      <% end %>
    </div>
  <% else %>
    <!-- Slider main container -->
    <div class="swiper h-full aspect-square border-r border-zinc-200">
      <!-- Additional required wrapper -->
      <div class="swiper-wrapper">
        <!-- Slides -->
        <% post.images.each do |image| %>
          <%= image_tag image, class: "swiper-slide absolute top-0 bottom-0 right-0 left-0 object-contain" %>
        <% end %>
      </div>
      <!-- pagination -->
      <div class="swiper-pagination"></div>

      <!-- navigation buttons -->
      <%= image_tag 'botton-prev.png', class: "swiper-button-prev" %>
      <%= image_tag 'botton-next.png', class: "swiper-button-next" %>
      <!--<div class="swiper-button-prev"></div>-->
      <!--<div class="swiper-button-next"></div>-->
    </div>
  <% end %>

  <div class="flex flex-col grow w-[38%] min-w-[409px] px-[15px] relative">
    <div class="flex items-center border-b border-zinc-200 py-[10px]">
      <%= image_tag post.user.get_profile_image(65,65), class: "rounded-full border border-stone-500" %>
      <div class="mx-[15px]">
      <p class="text-[20px] font-medium"><%= post.user.name %></p>
      <p class="text-[14px] text-neutral-500"><%= post.user.username %></p>
      </div>
      <div class="follow_buttons_<%= post.user.id %>">
        <%= render 'relationships/btn', user: post.user %>
      </div>
    </div>
    <div>
      <% post.tags.each do |tag| %>
        <div class="balloon relative w-[30px] h-3 inline-block border border-zinc-300 mr-2 align-middle" style="background-color: <%= Constants::COLOR_MAP[tag.name.to_sym] %>;">
          <span class="tag-text absolute hidden p-[2px] bg-zinc-200 w-[95px] text-center text-[80%] left-[30%] bottom-[100%] mb-[12px] rounded-lg"><%= tag.name %></span>
        </div>
      <% end %>
    </div>
    <div class="overflow-auto flex flex-col grow pb-[20px]">
      <p class="max-w-max text-[20px] font-medium border-b border-black pb-[4px] px-[8px] mt-[9px]"><%= post.furniture_name %></p>
      <p class="p-[22px]"><%= post.caption %></p>
      <p class="text-right"><%= post.created_at.strftime('%Y/%m/%d') %></p>

      <% if post.user == current_user || current_user.admin? %>
        <%= link_to "削除", post_path(post), method: :delete, data: {confirm: "投稿を削除しますか？"}, class: "bg-red-600 hover:bg-red-500 text-white rounded px-4 py-1" %>
      <% end %>

      <div id="new-comments">
        <%= render 'post_comments/index', post: post %>
      </div>
    </div>
    <div class="flex flex-col mt-auto pb-[15px]">
      <div class="flex justify-between border-t border-b border-zinc-200 px-[10px] py-[20px]">
        <div class="flex">
          <div class="favorites_buttons_<%= post.id %>">
            <%= render 'favorites/btn', post: post %>
          </div>
          <div class="flex ml-3">
            <svg class="w-6 h-6 transition duration-75 mr-1.5" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 01-.923 1.785A5.969 5.969 0 006 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337z"></path>
            </svg>
            <%= post.post_comments.count %>
          </div>
        </div>

        <div class="bookmarks_buttons_<%= post.id %>">
          <%= render 'bookmarks/btn', post: post %>
        </div>
      </div>

      <div id="comments-area">
        <%= render 'post_comments/form', post: post, post_comment: post_comment %>
      </div>
    </div>
  </div>


</div>